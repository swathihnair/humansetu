---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Emergency Contacts - Kerala Tourism">
  <div class="min-h-screen relative overflow-hidden">
    <!-- Kerala Themed Background -->
    <div class="fixed inset-0">
      <div 
        class="absolute inset-0 bg-cover bg-center bg-no-repeat"
        style="background-image: url('https://images.unsplash.com/photo-1602216056096-3b40cc0c9944?q=80&w=1920');"
      ></div>
      <div class="absolute inset-0 bg-gradient-to-br from-red-900/90 via-red-800/70 to-orange-600/50"></div>
    </div>
    
    <!-- Main Content -->
    <div class="relative z-10">
      <!-- Header -->
      <header class="bg-black/20 backdrop-blur-xl border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
          <a href="/plan-my-trip" class="text-2xl font-bold text-white hover:scale-105 transition-transform">
            Kerala<span class="text-kerala-gold">Tourism</span>
          </a>
          <div class="flex items-center gap-4">
            <a href="/plan-my-trip" class="px-4 py-2 text-white/80 border border-white/20 rounded-full hover:bg-white/10 transition-all hover:scale-105">
              â† Back to Plan My Trip
            </a>
          </div>
        </div>
      </header>
      
      <!-- Hero Section -->
      <div class="max-w-7xl mx-auto px-4 py-12">
        <div class="relative mb-12 rounded-3xl overflow-hidden animate-slide-up shadow-2xl">
          <div class="absolute inset-0 bg-gradient-to-r from-red-600 via-red-500 to-orange-500 bg-[length:200%_100%] animate-gradient"></div>
          <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1578662996442-48f60103fc96?q=80&w=1920')] bg-cover bg-center opacity-20"></div>
          
          <div class="relative p-8 md:p-16">
            <div class="text-center">
              <div class="w-24 h-24 bg-white/20 backdrop-blur-md rounded-3xl flex items-center justify-center text-5xl mx-auto mb-6 animate-float">
                ğŸš¨
              </div>
              <h1 class="text-4xl md:text-6xl font-bold text-white mb-4">
                Emergency Contacts
              </h1>
              <p class="text-white/90 text-xl md:text-2xl mb-8">
                24/7 Helpline Numbers - Your Safety is Our Priority
              </p>
              <div class="flex justify-center gap-4">
                <div class="px-4 py-2 bg-red-500/20 text-red-300 rounded-full text-sm border border-red-500/30 animate-pulse">
                  ğŸš¨ 24/7 Available
                </div>
                <div class="px-4 py-2 bg-orange-500/20 text-orange-300 rounded-full text-sm border border-orange-500/30">
                  ğŸ“ Toll Free Numbers
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Critical Emergency Numbers -->
        <div class="mb-16">
          <h2 class="text-3xl font-bold text-white mb-8 text-center">Critical Emergency Numbers</h2>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-12">
            <button onclick="callNumber('108')" class="p-6 bg-red-500/20 border-2 border-red-500/50 rounded-2xl hover:bg-red-500/30 transition-all text-white text-center group hover:scale-105 animate-slide-up">
              <div class="text-4xl mb-3 group-hover:animate-bounce">ğŸš‘</div>
              <div class="font-bold text-lg mb-1">Ambulance</div>
              <div class="text-2xl font-mono">108</div>
              <div class="text-sm text-white/70 mt-2">Medical Emergency</div>
            </button>
            <button onclick="callNumber('100')" class="p-6 bg-blue-500/20 border-2 border-blue-500/50 rounded-2xl hover:bg-blue-500/30 transition-all text-white text-center group hover:scale-105 animate-slide-up animation-delay-200">
              <div class="text-4xl mb-3 group-hover:animate-bounce">ğŸ‘®</div>
              <div class="font-bold text-lg mb-1">Police</div>
              <div class="text-2xl font-mono">100</div>
              <div class="text-sm text-white/70 mt-2">Security & Crime</div>
            </button>
            <button onclick="callNumber('101')" class="p-6 bg-orange-500/20 border-2 border-orange-500/50 rounded-2xl hover:bg-orange-500/30 transition-all text-white text-center group hover:scale-105 animate-slide-up animation-delay-400">
              <div class="text-4xl mb-3 group-hover:animate-bounce">ğŸ”¥</div>
              <div class="font-bold text-lg mb-1">Fire Service</div>
              <div class="text-2xl font-mono">101</div>
              <div class="text-sm text-white/70 mt-2">Fire & Rescue</div>
            </button>
            <button onclick="callNumber('112')" class="p-6 bg-green-500/20 border-2 border-green-500/50 rounded-2xl hover:bg-green-500/30 transition-all text-white text-center group hover:scale-105 animate-slide-up animation-delay-600">
              <div class="text-4xl mb-3 group-hover:animate-bounce">ğŸ†˜</div>
              <div class="font-bold text-lg mb-1">Disaster</div>
              <div class="text-2xl font-mono">112</div>
              <div class="text-sm text-white/70 mt-2">All Emergencies</div>
            </button>
          </div>
        </div>
        
        <!-- District Emergency Contacts -->
        <div class="mb-16">
          <div class="flex items-center justify-between mb-8">
            <h2 class="text-3xl font-bold text-white flex items-center gap-3">
              <div class="w-12 h-12 bg-gradient-to-br from-red-500 to-orange-600 rounded-2xl flex items-center justify-center text-2xl">
                ğŸ“
              </div>
              District Emergency Contacts
            </h2>
            <div class="flex gap-2">
              <button onclick="filterByDistrict('all')" class="filter-btn px-4 py-2 bg-kerala-gold text-white rounded-full text-sm hover:bg-kerala-gold/80 transition-all">
                All Districts
              </button>
              <button onclick="sortByName()" class="px-4 py-2 bg-white/20 text-white rounded-full text-sm hover:bg-white/30 transition-all">
                Sort by District
              </button>
            </div>
          </div>
          
          <div id="emergency-contacts" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Cards will be populated by JavaScript -->
          </div>
        </div>
        
        <!-- Tourism Department Emergency Numbers -->
        <div class="mb-16">
          <h2 class="text-3xl font-bold text-white mb-8 text-center">Tourism Department Helplines</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 overflow-hidden hover:bg-white/15 transition-all transform hover:scale-105 animate-slide-up">
              <div class="p-6">
                <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center text-2xl mb-4">
                  ğŸ›ï¸
                </div>
                <h3 class="text-lg font-bold text-white mb-2">Tourism Minister Office</h3>
                <div class="space-y-2">
                  <div class="flex items-center gap-2 text-white/80 text-sm">
                    <span class="text-base">ğŸ“</span>
                    <a href="tel:+914712321132" class="hover:text-kerala-gold transition-colors">
                      +91 471 2321132
                    </a>
                  </div>
                  <div class="text-white/60 text-xs">Thiruvananthapuram</div>
                </div>
                <button onclick="callNumber('+914712321132')" class="mt-4 w-full py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-all text-sm font-semibold">
                  Call Now
                </button>
              </div>
            </div>
            
            <div class="bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 overflow-hidden hover:bg-white/15 transition-all transform hover:scale-105 animate-slide-up animation-delay-200">
              <div class="p-6">
                <div class="w-12 h-12 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-xl flex items-center justify-center text-2xl mb-4">
                  ğŸ¯
                </div>
                <h3 class="text-lg font-bold text-white mb-2">Tourism Directorate</h3>
                <div class="space-y-2">
                  <div class="flex items-center gap-2 text-white/80 text-sm">
                    <span class="text-base">ğŸ“</span>
                    <a href="tel:+914712321132" class="hover:text-kerala-gold transition-colors">
                      +91 471 2321132
                    </a>
                  </div>
                  <div class="text-white/60 text-xs">Thiruvananthapuram</div>
                </div>
                <button onclick="callNumber('+914712321132')" class="mt-4 w-full py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-all text-sm font-semibold">
                  Call Now
                </button>
              </div>
            </div>
            
            <div class="bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 overflow-hidden hover:bg-white/15 transition-all transform hover:scale-105 animate-slide-up animation-delay-400">
              <div class="p-6">
                <div class="w-12 h-12 bg-gradient-to-br from-yellow-500 to-amber-600 rounded-xl flex items-center justify-center text-2xl mb-4">
                  âœˆï¸
                </div>
                <h3 class="text-lg font-bold text-white mb-2">Airport Tourism Counter</h3>
                <div class="space-y-2">
                  <div class="flex items-center gap-2 text-white/80 text-sm">
                    <span class="text-base">ğŸ“</span>
                    <a href="tel:+914712502298" class="hover:text-kerala-gold transition-colors">
                      +91 471 2502298
                    </a>
                  </div>
                  <div class="text-white/60 text-xs">Thiruvananthapuram Airport</div>
                </div>
                <button onclick="callNumber('+914712502298')" class="mt-4 w-full py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-all text-sm font-semibold">
                  Call Now
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Important Safety Tips -->
        <div class="bg-white/10 backdrop-blur-md rounded-3xl border border-white/20 p-8">
          <h3 class="text-2xl font-bold text-white mb-6 text-center">Important Safety Tips</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="text-center p-4 bg-white/5 rounded-xl">
              <div class="w-16 h-16 bg-kerala-gold/20 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-3">
                ğŸ“±
              </div>
              <h4 class="font-semibold text-white mb-2">Save Emergency Numbers</h4>
              <p class="text-white/70 text-sm">Keep important numbers saved in your phone for quick access</p>
            </div>
            <div class="text-center p-4 bg-white/5 rounded-xl">
              <div class="w-16 h-16 bg-kerala-gold/20 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-3">
                ğŸ“
              </div>
              <h4 class="font-semibold text-white mb-2">Share Your Location</h4>
              <p class="text-white/70 text-sm">Always share your travel itinerary with family or friends</p>
            </div>
            <div class="text-center p-4 bg-white/5 rounded-xl">
              <div class="w-16 h-16 bg-kerala-gold/20 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-3">
                ğŸ¥
              </div>
              <h4 class="font-semibold text-white mb-2">Know Nearby Hospitals</h4>
              <p class="text-white/70 text-sm">Identify nearest medical facilities at your destination</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    let emergencyData = [];
    
    // Fetch data from Google Sheets API
    async function fetchData() {
      try {
        const response = await fetch('https://script.google.com/macros/s/AKfycbzm29LaHpXECtSaX8b0Z9QHsP8DtZiDhHezWsIcpYg4K5d6NhsZrTqd3ppH2zBeYE7d5Q/exec');
        const data = await response.json();
        
        // Filter only emergency contacts
        emergencyData = data.filter(item => item.Module === 'Emergency Contact');
        
        // Render the data
        renderEmergencyContacts();
      } catch (error) {
        console.error('Error fetching data:', error);
        // Show error message
        const container = document.getElementById('emergency-contacts');
        if (container) {
          container.innerHTML = '<div class="col-span-full text-center text-white/70 p-8">Unable to load data. Please try again later.</div>';
        }
      }
    }
    
    // Format phone number
    function formatPhoneNumber(number) {
      if (typeof number === 'number') {
        const numStr = number.toString();
        if (numStr.length === 12) {
          return `+${numStr.slice(0, 2)} ${numStr.slice(2, 4)} ${numStr.slice(4, 7)} ${numStr.slice(7)}`;
        } else if (numStr.length === 10) {
          return `${numStr.slice(0, 4)} ${numStr.slice(4, 7)} ${numStr.slice(7)}`;
        }
      }
      return number.toString();
    }
    
    // Create emergency contact card HTML
    function createEmergencyCard(item) {
      return `
        <div class="bg-white/10 backdrop-blur-md rounded-2xl border border-red-500/30 overflow-hidden hover:bg-white/15 transition-all transform hover:scale-105 animate-slide-up contact-card" data-district="${item.District}">
          <div class="p-6">
            <div class="w-12 h-12 bg-gradient-to-br from-red-500 to-orange-600 rounded-xl flex items-center justify-center text-2xl mb-4">
              ğŸš¨
            </div>
            <h3 class="text-lg font-bold text-white mb-2">Emergency Contact</h3>
            <div class="space-y-2">
              <div class="flex items-center gap-2 text-white/80 text-sm">
                <span class="text-base">ğŸ›ï¸</span>
                <span>${item.District}</span>
              </div>
              <div class="flex items-center gap-2 text-white/80 text-sm">
                <span class="text-base">ğŸ“</span>
                <a href="tel:${item.Contact}" class="hover:text-kerala-gold transition-colors">
                  ${formatPhoneNumber(item.Contact)}
                </a>
              </div>
            </div>
            <button onclick="callNumber('${item.Contact}')" class="mt-4 w-full py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all text-sm font-semibold">
              ğŸš¨ Call Emergency
            </button>
          </div>
        </div>
      `;
    }
    
    // Render emergency contacts
    function renderEmergencyContacts(data = emergencyData) {
      const container = document.getElementById('emergency-contacts');
      if (!container) return;
      
      if (data.length === 0) {
        container.innerHTML = '<div class="col-span-full text-center text-white/70 p-8">No emergency contacts found.</div>';
        return;
      }
      
      container.innerHTML = data.map(item => createEmergencyCard(item)).join('');
    }
    
    // Filter by district
    function filterByDistrict(district) {
      if (district === 'all') {
        renderEmergencyContacts();
        document.querySelectorAll('.filter-btn').forEach(btn => {
          btn.classList.remove('bg-kerala-gold');
          btn.classList.add('bg-white/20');
        });
        if (event && event.target) {
          event.target.classList.remove('bg-white/20');
          event.target.classList.add('bg-kerala-gold');
        }
      } else {
        const filtered = emergencyData.filter(item => item.District.toLowerCase() === district.toLowerCase());
        renderEmergencyContacts(filtered);
      }
    }
    
    // Sort by name
    function sortByName() {
      const sorted = [...emergencyData].sort((a, b) => (a.District || '').localeCompare(b.District || ''));
      renderEmergencyContacts(sorted);
    }
    
    // Call number function
    function callNumber(number) {
      window.location.href = `tel:${number}`;
    }
    
    // Initialize on page load
    document.addEventListener('DOMContentLoaded', fetchData);
  </script>
</Layout>

<style>
  @keyframes slideUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  @keyframes gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
  }
  
  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  
  .animate-slide-up { animation: slideUp 0.6s ease-out forwards; opacity: 0; }
  .animate-gradient { animation: gradient 3s ease infinite; }
  .animate-float { animation: float 4s ease-in-out infinite; }
  .animate-bounce { animation: bounce 2s ease-in-out infinite; }
  
  .animation-delay-200 { animation-delay: 200ms; }
  .animation-delay-400 { animation-delay: 400ms; }
  .animation-delay-600 { animation-delay: 600ms; }
  
  .contact-card:nth-child(1) { animation-delay: 100ms; }
  .contact-card:nth-child(2) { animation-delay: 200ms; }
  .contact-card:nth-child(3) { animation-delay: 300ms; }
  .contact-card:nth-child(4) { animation-delay: 400ms; }
  .contact-card:nth-child(5) { animation-delay: 500ms; }
  .contact-card:nth-child(6) { animation-delay: 600ms; }
  .contact-card:nth-child(7) { animation-delay: 700ms; }
  .contact-card:nth-child(8) { animation-delay: 800ms; }
  .contact-card:nth-child(9) { animation-delay: 900ms; }
  .contact-card:nth-child(10) { animation-delay: 1000ms; }
  .contact-card:nth-child(11) { animation-delay: 1100ms; }
  .contact-card:nth-child(12) { animation-delay: 1200ms; }
  .contact-card:nth-child(13) { animation-delay: 1300ms; }
  .contact-card:nth-child(14) { animation-delay: 1400ms; }
</style>
